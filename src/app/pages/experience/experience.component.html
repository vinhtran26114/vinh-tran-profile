<div [class]="config.className">
  <div class="container" [style.maxWidth.px]="config.maxWidth">
    <!-- Loading State -->
    @if (cvService.isLoading()) {
      <div class="loading-state">
        <div class="loading-spinner">
          <span nz-icon nzType="loading" nzTheme="outline"></span>
          <p>Loading experience data...</p>
        </div>
      </div>
    }

    <!-- Error State -->
    @if (cvService.hasError()) {
      <div class="error-state">
        <span nz-icon nzType="exclamation-circle" nzTheme="outline"></span>
        <p>{{ cvService.hasError() }}</p>
        <button nz-button nzType="primary" (click)="cvService.loadCV()">Retry</button>
      </div>
    }

    <!-- Content when data is loaded -->
    @if (!cvService.isLoading() && !cvService.hasError() && cv()) {
      <!-- Education Section -->
      <section [id]="sections[1].id" class="section">
        <app-section-header [title]="sections[0].title" [icon]="sections[1].icon">
          <div class="section-subtitle">{{ 'SECTIONS.SUBTITLES.EDUCATION' | translate }}</div>
        </app-section-header>

        <div class="education-list">
          @for (edu of cv()?.education?.education; track edu) {
            <app-education-card [education]="edu"></app-education-card>
          }
        </div>
      </section>

      <!-- Work Experience Section -->
      <section [id]="sections[0].id" class="section">
        <app-section-header [title]="sections[1].title" [icon]="sections[0].icon">
          <div class="section-subtitle">{{ 'SECTIONS.SUBTITLES.WORK_EXPERIENCE' | translate }}</div>
        </app-section-header>

        <div class="experience-list">
          @for (companyExp of groupedExperiences(); track companyExp.company) {
            <app-combined-experience-card [companyExperience]="companyExp"></app-combined-experience-card>
          }
        </div>
      </section>
    }
  </div>
</div>
